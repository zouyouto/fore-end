{"version":3,"file":"static/js/10.df94b5d7bdaa4e61980a.js","sources":["webpack:///src/views/core/home/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-wrap\">\r\n        <div class=\"login-content\" v-loading=\"loginloading\" element-loading-text=\"正在登录...\">\r\n            <div class=\"ms-title\">{{logintitle}}</div>\r\n            <el-form label-position=\"right\" :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" size=\"mini\" label-width=\"0px\">\r\n                <el-form-item prop=\"username\">\r\n                    <el-input v-model=\"ruleForm.username\" class=\"inputwinth240\" :maxlength=\"20\">\r\n                        <template slot=\"prepend\">帐号</template>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"password\" style=\"margin-top:20px;\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.password\" @keyup.enter.native=\"submitForm()\" class=\"inputwinth240\" :maxlength=\"20\">\r\n                        <template slot=\"prepend\">密码</template>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item style=\"margin-top:20px;\">\r\n                    <el-button type=\"primary\" @click=\"submitForm()\" class=\"inputwinth240 login-height\">登录</el-button>\r\n                    <!-- <el-button @click=\"resetForm()\">重置</el-button> -->\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            moduleName: \"userInfo\",\r\n            loginloading: false,\r\n            logindesc: \"\",\r\n            logintitle: \"后台管理系统\",\r\n            ruleForm: {\r\n                username: \"root\",\r\n                password: \"admin123\"\r\n            },\r\n            rules: {\r\n                username: [{ required: true, message: \"请输入账号\" }],\r\n                password: [{ required: true, message: \"请输入密码\" }]\r\n            }\r\n        };\r\n    },\r\n    created: function() {\r\n        sessionStorage.removeItem(\"zsylocalInfo\");\r\n        sessionStorage.removeItem(\"zsylocalTabs\");\r\n        //console.clear();\r\n    },\r\n    methods: {\r\n        submitForm() {\r\n            const self = this;\r\n            self.$refs.ruleForm.validate(valid => {\r\n                if (valid) {\r\n                    self.loginloading = true;\r\n                    var u = self.ruleForm;\r\n                    var url =\r\n                        this.moduleName +\r\n                        \"/login?username=\" +\r\n                        u.username +\r\n                        \"&password=\" +\r\n                        self.$cryptosha1(u.password).toString();\r\n                    self.$ajax.get(url).then(\r\n                        data => {\r\n                            sessionStorage.setItem(\r\n                                \"zsylocalInfo\",\r\n                                JSON.stringify(data)\r\n                            );\r\n                            var childlst = [];\r\n                            const _import = require(\"@/router/_import_\" +\r\n                                process.env.NODE_ENV);\r\n                            var menuItems = data.data.functionDtoList;\r\n                            for (var item in menuItems) {\r\n                                if (menuItems[item].remarks) {\r\n                                    childlst.push({\r\n                                        path: menuItems[item].routePath,\r\n                                        component: _import(\r\n                                            menuItems[item].remarks\r\n                                        )\r\n                                    });\r\n                                }\r\n                                var subItems = menuItems[item].children;\r\n                                for (var subItem in subItems) {\r\n                                    if (subItems[subItem].remarks) {\r\n                                        childlst.push({\r\n                                            path: subItems[subItem].routePath,\r\n                                            component: _import(\r\n                                                subItems[subItem].remarks\r\n                                            )\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                            var routerlst = [\r\n                                {\r\n                                    path: \"/default\",\r\n                                    component: _import(\"core/home/Default\"),\r\n                                    children: childlst\r\n                                }\r\n                            ];\r\n                            self.$router.addRoutes(routerlst);\r\n                            console.clear();\r\n                            self.loginloading = false;\r\n                            self.$router.push(\"/index\");\r\n                        },\r\n                        error => {\r\n                            self.loginloading = false;\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        },\r\n        resetForm() {\r\n            this.$refs.ruleForm.resetFields();\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n.login-wrap {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #0da2b3;\r\n}\r\n.login-height {\r\n    height: 36px;\r\n}\r\n.login-content {\r\n    text-align: center;\r\n    background-color: #fff;\r\n    border-radius: 5px;\r\n    width: 300px;\r\n    height: 260px;\r\n    margin: auto;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}\r\n.ms-title {\r\n    height: 30px;\r\n    padding: 30px;\r\n    text-align: center;\r\n    font-size: 30px;\r\n    color: #0da2b3;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/core/home/Login.vue"],"mappings":"AAwBA","sourceRoot":""}