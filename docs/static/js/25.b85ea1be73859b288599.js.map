{"version":3,"file":"static/js/25.b85ea1be73859b288599.js","sources":["webpack:///src/views/core/system/Authority-Index.vue"],"sourcesContent":["<template>\r\n    <el-row>\r\n        <el-col :span=\"5\" :offset=\"1\">\r\n            <el-card class=\"box-card\">\r\n                <div slot=\"header\" class=\"clearfix\">\r\n                    <span>功能信息</span>\r\n                </div>\r\n                <el-tree :data=\"funcList\" :check-strictly=\"true\" ref=\"funcTree\" default-expand-all :props=\"defaultProps\" node-key=\"id\" show-checkbox></el-tree>\r\n            </el-card>\r\n        </el-col>\r\n        <el-col :span=\"5\" :offset=\"1\">\r\n            <el-card class=\"box-card\">\r\n                <div slot=\"header\" class=\"clearfix\">\r\n                    <span>数据权限</span>\r\n                </div>\r\n                <el-tree :data=\"organizeList\" ref=\"organizeTree\" default-expand-all :props=\"defaultProps\" node-key=\"id\" show-checkbox></el-tree>\r\n            </el-card>\r\n        </el-col>\r\n        <el-col :span=\"4\" :offset=\"1\">\r\n            <el-select v-model=\"roleId\" placeholder=\"请选择角色\" @change=\"selectOnTree\" :maxlength=\"20\" class=\"inputwinth192\">\r\n                <el-option v-for=\"item in roleList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                </el-option>\r\n            </el-select>\r\n            <el-button style=\"margin-top:10px;margin-left:62px;\" :disabled=\"loadingdata\" size=\"mini\" @click=\"onSubmit\" icon=\"fa fa-file-text-o\"> 保 存 </el-button>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            defaultProps: {\r\n                children: \"children\",\r\n                label: \"name\"\r\n            },\r\n            moduleName: \"role-relations\",\r\n            loadingdata: false,\r\n            roleId: \"\",\r\n            roleList: [],\r\n            funcList: [],\r\n            organizeList: []\r\n        };\r\n    },\r\n    created() {\r\n        this.getInitData();\r\n    },\r\n    mounted() {},\r\n    methods: {\r\n        getInitData() {\r\n            var getpath = \"/findAll\";\r\n            this.loadingdata = true;\r\n            this.$ajax.get(this.moduleName + getpath).then(\r\n                res => {\r\n                    this.loadingdata = false;\r\n                    this.roleList = res.data.roleList;\r\n                    this.funcList = res.data.funcList;\r\n                    this.organizeList = res.data.organizeList;\r\n                    this.roleId = this.roleList[0].id;\r\n                    this.selectOnTree(this.roleId);\r\n                },\r\n                error => {\r\n                    this.loadingdata = false;\r\n                }\r\n            );\r\n        },\r\n        selectOnTree(roldId) {\r\n            var getpath = \"/findOne?id=\" + roldId;\r\n            this.loadingdata = true;\r\n            this.$refs.funcTree.setCheckedKeys([]);\r\n            this.$refs.organizeTree.setCheckedKeys([]);\r\n            this.$ajax.get(this.moduleName + getpath).then(\r\n                res => {\r\n                    this.loadingdata = false;\r\n                    this.$refs.funcTree.setCheckedKeys(res.data.OnFuncList);\r\n                    this.$refs.organizeTree.setCheckedKeys(\r\n                        res.data.OnOrganizeList\r\n                    );\r\n                },\r\n                error => {\r\n                    this.loadingdata = false;\r\n                }\r\n            );\r\n        },\r\n        onSubmit() {\r\n            var getpath =\r\n                \"/save?roldId=\" +\r\n                this.roleId +\r\n                \"&funcs=\" +\r\n                this.$refs.funcTree.getCheckedKeys() +\r\n                \"&dusers=\" +\r\n                this.$refs.organizeTree.getCheckedKeys();\r\n            this.loadingdata = true;\r\n            this.$ajax.post(this.moduleName + getpath).then(\r\n                res => {\r\n                    this.loadingdata = false;\r\n                },\r\n                error => {\r\n                    this.loadingdata = false;\r\n                }\r\n            );\r\n        }\r\n    }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/core/system/Authority-Index.vue"],"mappings":"AA4BA","sourceRoot":""}