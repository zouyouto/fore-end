{"version":3,"file":"static/js/22.12b08650808f85bb8444.js","sources":["webpack:///src/views/core/system/Syslog-Index.vue"],"sourcesContent":["<template>\r\n    <el-row>\r\n        <el-row>\r\n            <el-col :span=\"20\">\r\n                <el-row style=\"margin-bottom:6px; padding:0 60px;\">\r\n                    <el-select v-model=\"queryData.opererType\" placeholder=\"请选择日志类型\" size=\"mini\" :maxlength=\"20\" class=\"inputwinth150\">\r\n                        <el-option v-for=\"item in global.logtype\" :key=\"item.id\" :label=\"item.name\" :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-row>\r\n                <el-row>\r\n\r\n                </el-row>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n                <el-button size=\"mini\" @click=\"cleanData\" icon=\"fa fa-eraser\"> 清 空</el-button>\r\n                <el-button size=\"mini\" @click=\"getPageData\" icon=\"el-icon-search\">查 询</el-button>\r\n            </el-col>\r\n        </el-row>\r\n        <el-table :data=\"tableData\" :row-class-name=\"tableRowClassName\" size=\"mini\" v-loading=\"loadingdata\" element-loading-text=\"正在加载中...\" border>\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"50\">\r\n            </el-table-column>\r\n            <el-table-column label=\"日志类型\" width=\"100\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"global.getCodeByName(global.logtype,prop.row.opererType)\"></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"opererContent\" label=\"日志内容\">\r\n            </el-table-column>\r\n            <el-table-column label=\"创建人\" width=\"150\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"global.getCodeByName(userList,prop.row.createId)\"></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"150\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"$moment(prop.row.createTime).format('YYYY-MM-DD HH:mm:ss')\"></span>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pIndex\" :page-sizes=\"[10,20,50,100]\" :page-size=\"pSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalNum\">\r\n        </el-pagination>\r\n    </el-row>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            dialogData: { id: 0, is_Enable: 1, is_Hide: 0 },\r\n            queryData: {},\r\n            moduleName: \"syslog\",\r\n            pIndex: 1,\r\n            pSize: 10,\r\n            totalNum: 0,\r\n            loadingdata: false,\r\n            tableData: [],\r\n            userList: [],\r\n            dialogShow: false,\r\n            dialogTitle: \"\",\r\n            delVisible: false\r\n        };\r\n    },\r\n    created() {\r\n        this.initData();\r\n    },\r\n    mounted() {\r\n        this.getPageData();\r\n    },\r\n    methods: {\r\n        initData() {\r\n            this.$ajax.get(\"userInfo/findAll\").then(res => {\r\n                this.userList = res.data;\r\n            });\r\n        },\r\n        cleanData() {\r\n            this.queryData = {};\r\n        },\r\n        handleSizeChange(val) {\r\n            console.log(`每页 ${val} 条`);\r\n            this.pSize = val;\r\n            this.getPageData();\r\n        },\r\n        handleCurrentChange(val) {\r\n            console.log(`当前页: ${val}`);\r\n            this.pIndex = val;\r\n            this.getPageData();\r\n        },\r\n        tableRowClassName({ row, rowIndex }) {\r\n            if (row.is_Enable == 0) {\r\n                return \"warning-row\";\r\n            }\r\n            return \"\";\r\n        },\r\n        getPageData() {\r\n            var condition = this.global.getcondition(this.queryData);\r\n            var getpath =\r\n                this.moduleName +\r\n                \"/findAll?pIndex=\" +\r\n                this.pIndex +\r\n                \"&pSize=\" +\r\n                this.pSize +\r\n                condition;\r\n            this.loadingdata = true;\r\n            this.$ajax.get(getpath).then(\r\n                res => {\r\n                    this.loadingdata = false;\r\n                    this.tableData = res.data;\r\n                    this.totalNum = res.totalNum;\r\n                },\r\n                error => {\r\n                    this.loadingdata = false;\r\n                }\r\n            );\r\n        }\r\n    }\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/core/system/Syslog-Index.vue"],"mappings":"AA6CA","sourceRoot":""}