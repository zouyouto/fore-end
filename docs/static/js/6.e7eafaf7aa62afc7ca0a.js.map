{"version":3,"file":"static/js/6.e7eafaf7aa62afc7ca0a.js","sources":["webpack:///src/views/core/system/User-Index.vue"],"sourcesContent":["<template>\r\n    <el-row>\r\n        <el-row>\r\n            <el-col :span=\"20\">\r\n                <el-row style=\"margin-bottom:6px; padding:0 60px;\">\r\n                    <el-input v-model=\"queryData.code\" placeholder=\"用户名\" :maxlength=\"20\" size=\"mini\" class=\"inputwinth150\">\r\n                        <template slot=\"prepend\">用户名</template>\r\n                    </el-input>\r\n                    <el-input v-model=\"queryData.name\" placeholder=\"真实姓名\" :maxlength=\"20\" size=\"mini\" class=\"inputwinth150\">\r\n                        <template slot=\"prepend\">真实姓名</template>\r\n                    </el-input>\r\n                    <el-radio v-model=\"queryData.is_Enable\" :label=\"1\">启用</el-radio>\r\n                    <el-radio v-model=\"queryData.is_Enable\" :label=\"0\">弃用</el-radio>\r\n                </el-row>\r\n                <el-row>\r\n                    <el-button size=\"mini\" icon=\"el-icon-plus\" @click=\"openDialog('新增',0)\">新增</el-button>\r\n                    <el-button size=\"mini\" icon=\"fa fa-sign-in\" @click=\"importExcel\"> 导入</el-button>\r\n                    <el-button size=\"mini\" icon=\"fa fa-sign-out\" @click=\"exportExcel\"> 导出</el-button>\r\n                </el-row>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n                <el-button size=\"mini\" @click=\"cleanData\" icon=\"fa fa-eraser\"> 清 空</el-button>\r\n                <el-button size=\"mini\" @click=\"getPageData\" icon=\"el-icon-search\">查 询</el-button>\r\n            </el-col>\r\n        </el-row>\r\n        <user-dialog :dialogTitle=\"dialogTitle\" :dialogShow.sync=\"dialogUserShow\" :dialogData=\"dialogData\" @RefreshData=\"getPageData\"></user-dialog>\r\n        <import-excel :dialogImportShow.sync=\"importExcelShow\" :dialogModuleName=\"moduleName\" @RefreshData=\"getPageData\"></import-excel>\r\n        <export-excel :dialogExportShow.sync=\"exportExcelShow\" :dialogModuleName=\"moduleName\" :dialogPageStr=\"exportPageStr\" :dialogWhereStr=\"exportWhereStr\"></export-excel>\r\n        <el-table :data=\"tableData\" :row-class-name=\"tableRowClassName\" size=\"mini\" v-loading=\"loadingdata\" element-loading-text=\"正在加载中...\" border>\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"50\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"code\" label=\"用户名\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"真实姓名\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"phoneNum\" label=\"手机号码\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column label=\"性别\" width=\"70\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"prop.row.is_Male==1?'男':'女'\"></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"roleId\" label=\"角色\" width=\"100\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"global.getCodeByName(roleList,prop.row.roleId)\"></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"组织结构\" width=\"300\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"getOrganizeName(prop.row.organizeIds)\"></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"sortNum\" label=\"排序\" sortable width=\"70\">\r\n            </el-table-column>\r\n            <el-table-column label=\"状态\" width=\"70\">\r\n                <template slot-scope=\"prop\">\r\n                    <span v-html=\"prop.row.is_Enable==1?'启用':'弃用'\"></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"100\">\r\n                <template slot-scope=\"prop\">\r\n                    <el-button @click=\"openDialog('编辑',prop.row.id)\" type=\"text\">编辑</el-button>\r\n                    <el-button @click=\"delId(prop.row.id)\" type=\"text\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pIndex\" :page-sizes=\"[10,20,50,100]\" :page-size=\"pSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalNum\">\r\n        </el-pagination>\r\n    </el-row>\r\n</template>\r\n<script>\r\nimport userdialog from \"@/views/core/system/dialog/User-Dialog\";\r\nimport ImportExcel from \"@/views/base/ImportExcel\";\r\nimport ExportExcel from \"@/views/base/ExportExcel\";\r\nexport default {\r\n    components: {\r\n        \"user-dialog\": userdialog,\r\n        \"import-excel\": ImportExcel,\r\n        \"export-excel\": ExportExcel\r\n    },\r\n    data() {\r\n        return {\r\n            dialogUserShow: false,\r\n            dialogTitle: \"\",\r\n            dialogData: { id: 0, is_Enable: 1, is_Hide: 0 },\r\n            queryData: {},\r\n            moduleName: \"userInfo\",\r\n            pIndex: 1,\r\n            pSize: 10,\r\n            totalNum: 0,\r\n            loadingdata: false,\r\n            tableData: [],\r\n            roleList: [],\r\n            organizeList: [],\r\n            importExcelShow: false,\r\n            exportExcelShow: false,\r\n            exportPageStr: \"\",\r\n            exportWhereStr: \"\"\r\n        };\r\n    },\r\n    created() {\r\n        this.initData();\r\n    },\r\n    mounted() {\r\n        this.getPageData();\r\n    },\r\n    methods: {\r\n        initData() {\r\n            this.$ajax.get(this.moduleName + \"/findResource\").then(res => {\r\n                this.roleList = res.data.roleList;\r\n                this.organizeList = res.data.organizeList;\r\n            });\r\n        },\r\n        cleanData() {\r\n            this.queryData = {};\r\n        },\r\n        handleSizeChange(val) {\r\n            this.pSize = val;\r\n            this.getPageData();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.pIndex = val;\r\n            this.getPageData();\r\n        },\r\n        tableRowClassName(row, rowIndex) {\r\n            if (row.is_Enable == 0) {\r\n                return \"warning-row\";\r\n            }\r\n            return \"\";\r\n        },\r\n        getOrganizeName(orgids) {\r\n            var organizesName = \"\";\r\n            var ids = orgids.split(\",\");\r\n            for (var k = 0; k < ids.length; k++) {\r\n                for (var i = 0; i < this.organizeList.length; i++) {\r\n                    if (this.organizeList[i].id == ids[k]) {\r\n                        organizesName += this.organizeList[i].name;\r\n                        break;\r\n                    }\r\n                }\r\n                if (k != ids.length - 1) organizesName += \"/\";\r\n            }\r\n            return organizesName;\r\n        },\r\n        getPageData() {\r\n            var condition = this.global.getcondition(this.queryData);\r\n            var getpath =\r\n                this.moduleName +\r\n                \"/findAll?pIndex=\" +\r\n                this.pIndex +\r\n                \"&pSize=\" +\r\n                this.pSize +\r\n                condition;\r\n            this.loadingdata = true;\r\n            this.$ajax.get(getpath).then(\r\n                res => {\r\n                    this.loadingdata = false;\r\n                    this.tableData = res.data;\r\n                    this.totalNum = res.totalNum;\r\n                },\r\n                error => {\r\n                    this.loadingdata = false;\r\n                }\r\n            );\r\n        },\r\n        openDialog(title, id) {\r\n            this.dialogTitle = title;\r\n            this.dialogUserShow = true;\r\n            if (id > 0) {\r\n                this.$ajax\r\n                    .get(this.moduleName + \"/findOne?id=\" + id)\r\n                    .then(res => {\r\n                        this.dialogData = res.data;\r\n                    });\r\n            } else {\r\n                this.dialogData = { id: 0, is_Enable: 1, is_Hide: 0 };\r\n            }\r\n        },\r\n        delId(id) {\r\n            this.$ajax\r\n                .post(this.moduleName + \"/deleteOne?id=\" + id)\r\n                .then(res => {\r\n                    this.getPageData();\r\n                });\r\n        },\r\n        importExcel() {\r\n            this.importExcelShow = true;\r\n        },\r\n        exportExcel() {\r\n            this.exportExcelShow = true;\r\n            this.exportPageStr =\r\n                \"pIndex=\" + this.pIndex + \"&pSize=\" + this.pSize;\r\n            this.exportWhereStr = this.global.getcondition(this.queryData);\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/core/system/User-Index.vue"],"mappings":"AA0EA","sourceRoot":""}